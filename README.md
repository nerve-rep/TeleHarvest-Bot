## TeleHarvest Bot
 Telegram бот на python-telegram-bot и Telethon для выгрузки постов из Telegram каналов.

Предоставляет два интерфейса: Telegram-бот для интерактивного использования и автономный скрипт для командной строки. Основная функциональность включает подключение к Telegram API через Telethon, извлечение указанного количества постов из канала и сохранение их в JSON-файл с метаданными (ID, текст, дата, просмотры, отправитель).

Технологии: Python, python-telegram-bot, Telethon

ИИ использовался для:

- ускорения разработки компонентов
- написания черновиков функций

Не использовался для:

- архитектуры проекта
- тестирования

## Функциональность

- Подключение к Telegram API через Telethon
- Извлечение указанного количества постов из Telegram-канала
- Сохранение постов в JSON-файл с метаданными (ID, текст, дата, просмотры, отправитель)
- Два интерфейса: Telegram-бот и автономный скрипт командной строки
- Интерактивное использование через Telegram-бота
- Возможность быстрого парсинга через командную строку

## Установка
> Для работы парсера через Telethon (пользовательский клиент) вам потребуются `API_ID` и `API_HASH`. Получить их можно на официальном сайте Telegram: [my.telegram.org](https://my.telegram.org).

1. Убедитесь, что у вас установлен Python 3.x
2. Склонируйте репозиторий:
   ```
   git clone <URL_репозитория>
   cd <название_папки_репозитория>
   ```
3. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

## Настройка


1. Получите `API_ID` и `API_HASH` 
2. Создайте бота и получите `BOT_TOKEN` у @BotFather в Telegram
3. Создайте файл `.env` в корне проекта
4. Заполните его следующими переменными:
   ```
   API_ID=ваш_api_id
   API_HASH=ваш_api_hash
   BOT_TOKEN=токен_вашего_бота
   ```

## Использование

Для создания сессии с личным аккаунтом, скрипт одноразово попросит номер телефона, с которым обратится в Telegram, а тот обратится к владельцу аккаунта за подтверждением. Файл сессии появится в самой папке.

Все результирующие .json файлы сохраняются в подпапку downloads.

### Telegram-бот

Для запуска Telegram-бота выполните:
```
run_bot.bat
```
После запуска бот будет доступен для взаимодействия через Telegram.

### Автономный парсер

Для использования автономного парсера выполните:
```
parse.bat
```
и укажите адрес и количество постов.

Либо укажите их в аргументах:
```
parse.bat https://t.me/durov 25
```
Результат сохранится в саму папку.

## Структура проекта

- `main.py` - Основной модуль с функциями для парсинга Telegram-каналов
- `run_parser.py` - Скрипт для автономного запуска парсера
- `config.py` - Конфигурационный файл с настройками и переменными окружения
- `requirements.txt` - Зависимости проекта
- `.gitignore` - Файл с игнорируемыми элементами для Git
- `run_bot.bat` - Батник для запуска Telegram-бота
- `parse.bat` - Батник для запуска автономного парсера
